<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>CJOSE: /Users/mamille2/Repositories/github.com/crypto/cjose/include/cjose/jwe.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CJOSE
   &#160;<span id="projectnumber">0.4.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_55b9275dd3380a8a8f3d70da798804d2.html">cjose</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">jwe.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Functions and data structures for interacting with JSON Web Encryption (JWE) objects.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stddef.h&gt;</code><br />
<code>#include &quot;<a class="el" href="header_8h_source.html">header.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="error_8h_source.html">error.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="jwk_8h_source.html">jwk.h</a>&quot;</code><br />
</div>
<p><a href="jwe_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a080e14b1c8948c89f65b740474792496"><td class="memItemLeft" align="right" valign="top">typedef struct _cjose_jwe_int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a></td></tr>
<tr class="separator:a080e14b1c8948c89f65b740474792496"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aa7310417ebbce6715a58a31188d810ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jwe_8h.html#aa7310417ebbce6715a58a31188d810ab">cjose_jwe_encrypt</a> (const <a class="el" href="jwk_8h.html#a8bf81334275100f767b1e94742b9d648">cjose_jwk_t</a> *jwk, <a class="el" href="header_8h.html#aaf54c81c6d7513fde1621dbe6d47fa57">cjose_header_t</a> *protected_header, const uint8_t *plaintext, size_t plaintext_len, <a class="el" href="structcjose__err.html">cjose_err</a> *err)</td></tr>
<tr class="separator:aa7310417ebbce6715a58a31188d810ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9867d9c58c53186f821606376a6f070e"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jwe_8h.html#a9867d9c58c53186f821606376a6f070e">cjose_jwe_export</a> (<a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a> *jwe, <a class="el" href="structcjose__err.html">cjose_err</a> *err)</td></tr>
<tr class="separator:a9867d9c58c53186f821606376a6f070e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89b8df7a38bd7319a57d498f153b96a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jwe_8h.html#a89b8df7a38bd7319a57d498f153b96a1">cjose_jwe_import</a> (const char *compact, size_t compact_len, <a class="el" href="structcjose__err.html">cjose_err</a> *err)</td></tr>
<tr class="separator:a89b8df7a38bd7319a57d498f153b96a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed43ac8f57dd69ced029d9039f47c923"><td class="memItemLeft" align="right" valign="top">uint8_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jwe_8h.html#aed43ac8f57dd69ced029d9039f47c923">cjose_jwe_decrypt</a> (<a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a> *jwe, const <a class="el" href="jwk_8h.html#a8bf81334275100f767b1e94742b9d648">cjose_jwk_t</a> *jwk, size_t *content_len, <a class="el" href="structcjose__err.html">cjose_err</a> *err)</td></tr>
<tr class="separator:aed43ac8f57dd69ced029d9039f47c923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86c277f207b0c8362bc3687c0b1bb01a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="header_8h.html#aaf54c81c6d7513fde1621dbe6d47fa57">cjose_header_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jwe_8h.html#a86c277f207b0c8362bc3687c0b1bb01a">cjose_jwe_get_protected</a> (<a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a> *jwe)</td></tr>
<tr class="separator:a86c277f207b0c8362bc3687c0b1bb01a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6d69e3780cd046229227f05b2fbc6b8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="jwe_8h.html#af6d69e3780cd046229227f05b2fbc6b8">cjose_jwe_release</a> (<a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a> *jwe)</td></tr>
<tr class="separator:af6d69e3780cd046229227f05b2fbc6b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Functions and data structures for interacting with JSON Web Encryption (JWE) objects. </p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a class="anchor" id="a080e14b1c8948c89f65b740474792496"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct _cjose_jwe_int <a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>An instance of a JWE object. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aed43ac8f57dd69ced029d9039f47c923"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t* cjose_jwe_decrypt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a> *&#160;</td>
          <td class="paramname"><em>jwe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="jwk_8h.html#a8bf81334275100f767b1e94742b9d648">cjose_jwk_t</a> *&#160;</td>
          <td class="paramname"><em>jwk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>content_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcjose__err.html">cjose_err</a> *&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Decrypts the JWE object using the given JWK. Returns the plaintext data of the JWE payload.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jwe</td><td>[in] the JWE object to decrypt. </td></tr>
    <tr><td class="paramname">jwk</td><td>[in] the key to use for decrypting. </td></tr>
    <tr><td class="paramname">content_len</td><td>[out] The number of byes in the returned buffer. </td></tr>
    <tr><td class="paramname">err</td><td>[out] An optional error object which can be used to get additional information in the event of an error. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The decrypted content. Note the caller is responseible for free'ing this buffer when no longer in use. Failure to do so will result in a memory leak. </dd></dl>

</div>
</div>
<a class="anchor" id="aa7310417ebbce6715a58a31188d810ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a>* cjose_jwe_encrypt </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="jwk_8h.html#a8bf81334275100f767b1e94742b9d648">cjose_jwk_t</a> *&#160;</td>
          <td class="paramname"><em>jwk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="header_8h.html#aaf54c81c6d7513fde1621dbe6d47fa57">cjose_header_t</a> *&#160;</td>
          <td class="paramname"><em>protected_header</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>plaintext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>plaintext_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcjose__err.html">cjose_err</a> *&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new JWE by encrypting the given plaintext within the given header and JWK.</p>
<p>If the header provided indicates an algorithm requiring an asymmetric key (e.g. RSA-OAEP), the provided JWK must be asymmetric (e.g. RSA or EC).</p>
<p>If the header provided indicates an algorithm requiring a symmetric key (e.g. (dir), the provided JWK must be symmetric (e.g. oct).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jwk</td><td>[in] the key to use for encrypting the JWE. </td></tr>
    <tr><td class="paramname">protected_header</td><td>[in] additional header values to include in the JWE header. </td></tr>
    <tr><td class="paramname">plaintext</td><td>[in] the plaintext to be encrypted in the JWE payload. </td></tr>
    <tr><td class="paramname">plaintext_len</td><td>[in] the length of the plaintext. </td></tr>
    <tr><td class="paramname">err</td><td>[out] An optional error object which can be used to get additional information in the event of an error. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a newly generated JWE with the given plaintext as the payload. </dd></dl>

</div>
</div>
<a class="anchor" id="a9867d9c58c53186f821606376a6f070e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* cjose_jwe_export </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a> *&#160;</td>
          <td class="paramname"><em>jwe</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcjose__err.html">cjose_err</a> *&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a serialization of the given JWE object.</p>
<p>Note the current implementation only supports serialization to the JWE compact format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jwe</td><td>[in] The JWE object to be serialized. </td></tr>
    <tr><td class="paramname">err</td><td>[out] An optional error object which can be used to get additional information in the event of an error. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to a compact serialization of this JWE. Note the returned string pointer is owned by the caller, the caller must free it directly when no longer needed, or the memory will be leaked. </dd></dl>

</div>
</div>
<a class="anchor" id="a86c277f207b0c8362bc3687c0b1bb01a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="header_8h.html#aaf54c81c6d7513fde1621dbe6d47fa57">cjose_header_t</a>* cjose_jwe_get_protected </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a> *&#160;</td>
          <td class="paramname"><em>jwe</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns the protected header of the JWE object.</p>
<p><b>NOTE:</b> The returned header is still owned by the JWE object. Users must call <code><a class="el" href="header_8h.html#a9283e11f72cc825217c56882ff3c3498">cjose_header_retain()</a></code> if it is expected to be valid after the owning <code>cjose_jwe_t</code> is released.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jwe</td><td>[in] the JWE object for which the protected header is requested. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the (parsed) protected header </dd></dl>

</div>
</div>
<a class="anchor" id="a89b8df7a38bd7319a57d498f153b96a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a>* cjose_jwe_import </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>compact</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>compact_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structcjose__err.html">cjose_err</a> *&#160;</td>
          <td class="paramname"><em>err</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Creates a new JWE object from the given JWE compact serialization.</p>
<p>Note the current implementation only recognizes the JWE compact serialization format.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">compact</td><td>[in] a JWE in serialized form. </td></tr>
    <tr><td class="paramname">compact_len</td><td>[in] the length of the compact serialization. </td></tr>
    <tr><td class="paramname">err</td><td>[out] An optional error object which can be used to get additional information in the event of an error. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a newly generated JWE object from the given JWE serialization. </dd></dl>

</div>
</div>
<a class="anchor" id="af6d69e3780cd046229227f05b2fbc6b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cjose_jwe_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="jwe_8h.html#a080e14b1c8948c89f65b740474792496">cjose_jwe_t</a> *&#160;</td>
          <td class="paramname"><em>jwe</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Releases the given JWE object.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">jwe</td><td>the JWE to be released. If null, this is a no-op. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Aug 4 2016 11:19:38 for CJOSE by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
