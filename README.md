# cjose #

Implementation of JOSE for C/C++

## Prerequisites ##

### Build Tools ###

* GNU Make >= 3.81
* LLVM >= 5.1 or GCC >= 4.5
* Autoconf (>= 2.69)
* Automake (>= 1.14)
* libtool (>= 2.4)
* Check (>= 0.9.4) - unit testing
* Doxygen (>= 1.8) - documentation

### Libraries ###

* OpenSSL >= 1.0.1h (or its API equivalent)
* JSON-C >= 0.12

## Getting Started ##

As with most autoconf/automake projects:

    git clone git@sqbu-github.cisco.com:mamille2/cjose.git
    cd cjose
    ./configure && make

### Common Options ###

    --with-openssl: Specify the location where OpenSSL/CiscoSSL is installed
    --with-json-c: Specify the location where JSON-C is installed
    --disable-shared: Only build static library

### Debug Mode ###

To compile in debug mode (minimal optimization, active asserts, etc), specify the appropriate CFLAGS as a command-line argument when executing configure:

    ./configure CFLAGS="-g -O0 -DDEBUG"


## Tests ##

To execute the unit tests:

    make test

If successful, the list of checks will be displayed on the console.  Otherwise, the file "test/test-suite.log" will list the specific test(s) that failed.

## API Docs ##

To generate Doxygen API documentation:

    make doxygen

Which will place the generated documentation in "doc/html".

## From Scratch ##

To rebuild all of the project -- including those files generated by autoconf and automake:

    autoreconf --force --install

## Troubleshooting ##

### Configure can't find check.h header file.

This has been seen on Mac OSX 10.8 and 10.9 when check has been installed
via brew.  A solution is to explicitly include the /usr/local/include directory
in the cflags:

    ./configure CFLAGS="-I/usr/local/include"

### Configure can't find the json-c library.

This has been seen on Mac OSX 10.9 when jose-c has been installed via brew.
A solution is to explicitly include the json-c directory in the configure 
command:

    ./configure --with-json-c=/usr/local/Cellar/json-c/0.12

### Make fails due to many OpenSSL functions being "deprecated".

This has been seen on Mac OSX 10.9 when openssl 1.0.1h has been installed via
brew.  A solution is to explicitly include the openssl directory in the 
configure command:

    ./configure --with-openssl=/usr/local/Cellar/openssl/1.0.1h

(This can of course be combined with the "--with-json-c" parameter described above
when experiencing both issues).
